<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAMPUS CAPITAL | Strathmore Student-Run Fund</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0d1117;
            --accent: #58a6ff;
            --bg: #161b22;
            --card-bg: #21262d;
            --glass: rgba(33,38,45,0.92);
            --text: #c9d1d9;
            --muted: #8b949e;
            --border: #30363d;
            --shadow: 0 8px 32px 0 rgba(20,30,50,0.18);
        }
        html { box-sizing: border-box; }
        *, *:before, *:after { box-sizing: inherit; }
        body {
            font-family: 'Inter', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 240px 1fr 240px;
            gap: 32px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 0 32px 0;
        }
        .side {
            position: sticky;
            top: 80px;
            align-self: flex-start;
            min-height: 80vh;
        }
        .center {
            margin-top: 48px;
        }
        .card, .glass {
            background: var(--glass);
            border-radius: 14px;
            box-shadow: var(--shadow);
            padding: 28px 32px;
            margin-bottom: 32px;
        }
        header {
            width: 100vw;
            background: var(--primary);
            color: var(--accent);
            padding: 0 0 0 0;
            position: sticky;
            top: 0;
            z-index: 1002;
            box-shadow: 0 2px 12px rgba(10,25,47,0.10);
        }
        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 14px 32px 2px 32px;
            position: relative;
        }
        .logo {
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: 1px;
            margin-left: 0;
            transition: margin-left 0.3s linear, color 1.2s linear;
            flex-shrink: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        nav {
            margin-left: auto;
            display: flex;
            gap: 28px;
        }
        nav {
            display: flex;
            gap: 28px;
        }
        nav a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        nav a:hover { color: var(--accent); }
        .ticker {
            width: 100vw;
            overflow: hidden;
            white-space: nowrap;
            background: var(--primary);
            color: var(--accent);
            font-weight: 700;
            font-size: 1.1em;
            padding: 8px 0 8px 32px;
            position: sticky;
            top: 56px;
            left: 0;
            z-index: 1001;
        }
        h1, h2, h3 { color: var(--accent); margin-top: 0; }
        .goals-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .goal-item {
            background: var(--card-bg);
            border-left: 6px solid var(--accent);
            padding: 22px 24px 18px 24px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(10,25,47,0.10);
            transition: box-shadow 0.2s, transform 0.2s;
            position: relative;
        }
        .goal-item:hover {
            box-shadow: 0 8px 24px rgba(10,25,47,0.18);
            transform: translateY(-2px) scale(1.02);
        }
        .muted { color: var(--muted); font-size: 1em; }
        .tag {
            display: inline-block;
            background: var(--accent);
            color: #161b22;
            font-size: 0.85em;
            font-weight: 600;
            border-radius: 6px;
            padding: 2px 10px;
            margin-right: 8px;
            margin-bottom: 6px;
        }
        .ai-chatbox {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 340px;
            max-width: 90vw;
            background: var(--card-bg);
            border-radius: 14px;
            box-shadow: 0 4px 24px rgba(10,25,47,0.18);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border);
        }
        .ai-chatbox input, .ai-chatbox button {
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--border);
        }
        .ai-chatbox button {
            background: var(--accent);
            color: var(--primary);
        }
        .ai-chatbox button:hover {
            background: var(--primary);
            color: var(--accent);
        }
        /* --- Financial Calculator Section Styles --- */
        #ai-demos form {
            background: rgba(33,38,45,0.85);
            border-radius: 10px;
            padding: 18px 18px 12px 18px;
            margin-bottom: 18px;
            box-shadow: 0 2px 8px rgba(10,25,47,0.10);
            display: flex;
            flex-wrap: wrap;
            gap: 18px 32px;
            align-items: flex-end;
        }
        #ai-demos form label {
            display: block;
            font-size: 1em;
            color: var(--text);
            margin-bottom: 8px;
            font-weight: 500;
        }
        #ai-demos form input[type="number"],
        #ai-demos form input[type="text"] {
            width: 100%;
            padding: 7px 10px;
            margin-top: 4px;
            margin-bottom: 12px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            font-size: 1em;
            box-sizing: border-box;
            transition: border 0.2s;
        }
        #ai-demos form input:focus {
            border: 1.5px solid var(--accent);
            outline: none;
        }
        #ai-demos form button[type="submit"] {
            background: var(--accent);
            color: var(--primary);
            border: none;
            padding: 12px 32px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1em;
            margin-top: 8px;
            box-shadow: 0 2px 8px rgba(10,25,47,0.10);
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        #ai-demos form button[type="submit"]:hover {
            background: var(--primary);
            color: var(--accent);
        }
        #ai-demos #finance-results {
            background: rgba(33,38,45,0.7);
            border-radius: 8px;
            padding: 18px 18px 10px 18px;
            margin-top: 18px;
            color: var(--accent);
            font-size: 1.08em;
            box-shadow: 0 2px 8px rgba(10,25,47,0.10);
        }
        .sidebar-card {
            background: rgba(33,38,45,0.55); /* semi-transparent glass effect */
            border-radius: 10px;
            padding: 18px 14px;
            margin-bottom: 18px;
            box-shadow: 0 2px 8px rgba(10,25,47,0.10);
            color: #eaf6ff; /* brighter text for contrast */
            backdrop-filter: blur(6px);
        }
        .sidebar-card h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: var(--accent);
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 4px #0d1117;
        }
        .sidebar-card a, .sidebar-card ul, .sidebar-card li, .sidebar-card div {
            color: #eaf6ff !important;
            text-shadow: 0 1px 4px #0d1117;
        }
        .sidebar-card a:hover {
            color: #58a6ff !important;
        }
        @media (max-width: 1100px) {
            .main-grid { grid-template-columns: 1fr; gap: 0; }
            .side { display: none; }
            .center { margin-top: 24px; }
        }
        @media (max-width: 700px) {
            .container, .header-inner { padding: 12px 2vw; }
            .center { margin-top: 12px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-inner" style="min-height:56px;">
            <span class="logo">CAMPUS CAPITAL</span>
            <nav>
                <a href="#executive" id="executive-link">Executive</a>
                <a href="#goals">Goals</a>
                <a href="#ai-demos">AI Demos</a>
                <a href="#resources">Resources</a>
                <a href="#team">Team</a>
                <a href="#contact">Contact</a>
            </nav>
        </div>
    </header>
    <div class="ticker"><span id="ticker-content"></span></div>
    <div class="main-grid">
        <aside class="side">
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Market Snapshot</h3>
                <div id="market-snapshot" style="font-size:0.98em;line-height:1.5;"></div>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Trending Global News</h3>
                <ul id="trending-news" style="list-style:none;padding-left:0;margin:0;font-size:0.98em;line-height:1.5;"></ul>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Quick Finance Facts</h3>
                <div id="finance-fact" style="font-size:0.98em;"></div>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Market Snapshot</h3>
                <div id="market-snapshot" style="font-size:0.98em;line-height:1.5;"></div>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Trending Global News</h3>
                <ul id="trending-news" style="list-style:none;padding-left:0;margin:0;font-size:0.98em;line-height:1.5;"></ul>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Quick Finance Facts</h3>
                <div id="finance-fact" style="font-size:0.98em;"></div>
            </div>
<!-- CSS moved to <style> tag below -->
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Quick Links</h3>
                <ul style="list-style:none;padding-left:0;margin:0;font-size:0.98em;">
                    <li><a href="https://www.nasdaq.com/market-activity" target="_blank">Market Activity</a></li>
                    <li><a href="https://www.blackrock.com/institutions/en-zz/insights" target="_blank">BlackRock Insights</a></li>
                    <li><a href="https://strathmore.edu/" target="_blank">Strathmore University</a></li>
                    <li><a href="https://www.wsj.com/news/markets" target="_blank">WSJ Markets</a></li>
                </ul>
            </div>
        </aside>
        <main class="center">
            <!-- Hero Section -->
            <section class="card hero" id="hero" style="text-align:center;padding-top:32px;padding-bottom:40px;">
                <h1 id="hero-heading" style="font-size:2.7rem;font-weight:800;letter-spacing:-1px;line-height:1.1;margin-bottom:18px;">Strathmore Student-Run Fund: Shaping the Future of Finance</h1>
                <div id="hero-desc" style="font-size:1.18rem;max-width:700px;margin:0 auto 24px auto;line-height:1.7;text-align:justify;font-family:'Segoe UI', 'Arial', 'Verdana', sans-serif;letter-spacing:0.01em;transition:color 0.3s;"></div>
                <a href="#goals" style="display:inline-block;margin-top:18px;padding:12px 32px;font-size:1.1rem;font-weight:700;background:var(--accent);color:var(--primary);border-radius:8px;text-decoration:none;transition:background 0.2s;">See Our Goals</a>
            </section>
            <!-- Goals Section -->
            <section class="card" id="goals">
                <h2 style="margin-bottom:18px;">Our Core Goals</h2>
                <ul class="goals-list">
                    <li class="goal-item"><span class="tag">Investment</span><strong>Build Real-World Investment Skills</strong><br><span class="muted">Engage students in portfolio management, security analysis, and risk assessment using real market data and tools.</span></li>
                    <li class="goal-item"><span class="tag">Governance</span><strong>Promote Transparent Fund Management</strong><br><span class="muted">Adopt best practices in fund governance, compliance, and reporting, inspired by global leaders like BlackRock.</span></li>
                    <li class="goal-item"><span class="tag">Research</span><strong>Advance Financial Knowledge</strong><br><span class="muted">Encourage research on market trends, financial instruments, and the impact of global events on investment strategies.</span></li>
                    <li class="goal-item"><span class="tag">Community</span><strong>Foster Collaboration & Leadership</strong><br><span class="muted">Develop teamwork, leadership, and communication skills through student-led committees and outreach initiatives.</span></li>
                </ul>
            </section>
            <!-- Resources Section (dynamic, script: renderResource) -->
            <section class="card" id="resources">
                <h2 style="margin-bottom:18px;">Explore Top Finance Resources</h2>
                <div style="padding:0 0 8px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.investopedia.com/favicon.ico" alt="Investopedia" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Investopedia</b> — The world’s largest and most trusted online resource for financial education, with 25,000+ articles, tutorials, and a trading simulator. <a href="https://www.investopedia.com/" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.khanacademy.org/favicon.ico" alt="Khan Academy" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Khan Academy – Finance & Economics</b> — Free, world-class video lessons on everything from money basics to advanced investing and macroeconomics. <a href="https://www.khanacademy.org/economics-finance-domain/core-finance" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.cfainstitute.org/favicon.ico" alt="CFA Institute" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">CFA Institute</b> — The global gold standard for investment professionals, offering the CFA® Program, research, and in-depth reports on AI, climate finance, and global markets. <a href="https://www.cfainstitute.org/" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.morningstar.com/favicon.ico" alt="Morningstar" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Morningstar</b> — Independent investment research, mutual fund and ETF ratings, portfolio tools, and up-to-date market news. <a href="https://www.morningstar.com/" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.nasdaq.com/favicon.ico" alt="Nasdaq" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Nasdaq</b> — Real-time market data, IPO news, and educational content on trading, ETFs, and global capital markets. <a href="https://www.nasdaq.com/" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.ft.com/apple-touch-icon.png" alt="Financial Times" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Financial Times – Markets</b> — Premier source for global financial news, analysis, and opinion, covering equities, bonds, fintech, and economic policy. <a href="https://www.ft.com/markets" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.bloomberg.com/favicon.ico" alt="Bloomberg Markets" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Bloomberg Markets</b> — Real-time data, news, and analysis on stocks, bonds, currencies, and commodities. Their “Explainers” and “Odd Lots” podcast are especially useful for understanding complex market trends. <a href="https://www.bloomberg.com/markets" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.sec.gov/favicon.ico" alt="SEC EDGAR" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">SEC EDGAR</b> — The official U.S. database for company filings, essential for researching public companies’ financial statements and disclosures. <a href="https://www.sec.gov/edgar.shtml" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.federalreserve.gov/favicon.ico" alt="Federal Reserve" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">Federal Reserve</b> — The U.S. central bank’s site for economic research, policy updates, and key data on interest rates, inflation, and the U.S. economy. <a href="https://www.federalreserve.gov/" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.imf.org/favicon.ico" alt="IMF Data" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">IMF Data</b> — Global economic and financial statistics, including the World Economic Outlook, country data, and research on macroeconomic trends. <a href="https://www.imf.org/en/Data" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                    <hr style="border:none;border-top:1px solid var(--border);margin:18px 0;">
                    <div style="display:flex;align-items:flex-start;gap:18px 32px;flex-wrap:wrap;">
                        <img src="https://www.worldbank.org/etc/designs/wbg/favicon.ico" alt="World Bank Research" style="width:38px;height:38px;margin-right:12px;vertical-align:middle;">
                        <div style="flex:1 1 320px;min-width:220px;">
                            <b style="font-size:1.18em;color:var(--accent);">World Bank Research</b> — The leading source for global development data, economic research, and policy analysis. Their Open Knowledge Repository offers 30,000+ publications on financial inclusion, global economic prospects, and more. <a href="https://www.worldbank.org/en/research" target="_blank" style="color:var(--accent);font-weight:600;">Learn More</a>
                        </div>
                    </div>
                </div>
            </section>
            <!-- History Section (dynamic, script: renderFinanceHistory) -->
            <section class="card" id="history">
                <h2 style="margin-bottom:18px;">Milestones in Financial History</h2>
                <div style="margin-top:12px;max-width:820px;">
                    <div style="margin-bottom:22px;">
                        <b style="font-size:1.18em;color:var(--accent);">The 1700s: Foundations of Modern Finance</b>
                        <div style="margin-top:6px;font-size:1.07em;line-height:1.75;">
                            The 18th century marked the emergence of modern finance. The Bank of England (1694) pioneered central banking, stabilizing government debt and currency. The South Sea Bubble (1720) and Mississippi Bubble (1720) were early global financial crises, exposing the dangers of speculation and the need for regulation. Joint-stock companies, such as the British and Dutch East India Companies, enabled unprecedented global trade and investment. Insurance markets, like Lloyd’s of London, became essential for managing risk in shipping and commerce. By the late 1700s, government bonds and public debt markets were established, laying the groundwork for modern capital markets.
                        </div>
                    </div>
                    <div style="margin-bottom:22px;">
                        <b style="font-size:1.18em;color:var(--accent);">The 1800s: Industrial Revolution, Globalization, and Financial Turmoil</b>
                        <div style="margin-top:6px;font-size:1.07em;line-height:1.75;">
                            The 19th century was a crucible of financial innovation and upheaval. The Industrial Revolution drove massive capital needs for railroads, factories, and infrastructure, fueling the rise of investment banks like Rothschild and J.P. Morgan. The New York Stock Exchange (1817) and London Stock Exchange became global centers for equity and bond trading. Limited liability laws (UK, 1855) encouraged entrepreneurship and risk-taking, while mutual funds and insurance companies democratized investment and risk management.<br><br>
                            The century was also marked by frequent crises: the Panic of 1819 (America’s first major depression), the Panic of 1837 (triggered by speculative lending and bank failures), and the Long Depression (1873–1879), which began with the collapse of the Vienna Stock Exchange and spread worldwide. The U.S. National Banking Acts (1863, 1864) created a uniform currency and a system of national banks, but also led to instability and the need for a true central bank. International gold flows and the gold standard linked economies, but also transmitted shocks globally.<br><br>
                            By the late 1800s, financial globalization was in full swing: London was the world’s financial capital, telegraph and steamship technology enabled rapid capital movement, and cross-border investment soared. Yet, the era ended with the Panic of 1893 and the realization that modern economies needed robust regulation and central banking to manage risk and growth.
                        </div>
                    </div>
                    <div style="margin-bottom:22px;">
                        <b style="font-size:1.18em;color:var(--accent);">The 1900s: Regulation, Crisis, and Globalization</b>
                        <div style="margin-top:6px;font-size:1.07em;line-height:1.75;">
                            The 20th century began with the Panic of 1907, which led to the creation of the U.S. Federal Reserve in 1913. The Wall Street Crash of 1929 triggered the Great Depression, prompting sweeping reforms: deposit insurance, securities regulation, and central bank intervention. The Bretton Woods Conference (1944) established the IMF and World Bank, anchoring the postwar global financial system.<br><br>
                            The late 20th century saw the end of the gold standard (1971), the rise of floating exchange rates, and the globalization of finance. Black Monday (1987) and the 2008 Global Financial Crisis highlighted the risks of leverage, innovation, and interconnected markets, leading to new waves of regulation and central bank activism.
                        </div>
                    </div>
                    <div style="margin-bottom:10px;">
                        <b style="font-size:1.18em;color:var(--accent);">The 2000s and Beyond: Digital Finance and the Future</b>
                        <div style="margin-top:6px;font-size:1.07em;line-height:1.75;">
                            The 21st century is defined by digital transformation: fintech, cryptocurrencies, and central bank digital currencies (CBDCs) are reshaping how money moves and how people invest. Financial inclusion is expanding through mobile banking and digital payments, while new risks—cybersecurity, algorithmic trading, and global shocks—demand constant innovation in regulation and policy.
                        </div>
                    </div>
                </div>
            </section>
            <!-- Financial Formula Calculator Section -->
            <section class="card" id="ai-demos">
                <h2 style="margin-bottom:18px;">Financial Formula Calculator</h2>
                <div style="margin-bottom:18px;">
                    <b>Choose a formula to calculate and learn:</b>
                </div>
                <form id="finance-form" style="display:block;max-width:520px;background:var(--card-bg);padding:22px 18px 18px 18px;border-radius:12px;box-shadow:0 2px 8px rgba(10,25,47,0.07);">
                    <div style="margin-bottom:18px;">
                        <label for="formula-select" style="font-weight:700;">Select Formula</label>
                        <select id="formula-select" name="formula" style="width:100%;padding:8px 10px;border-radius:6px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:1.08em;">
                            <option value="eps">EPS (Earnings Per Share)</option>
                            <option value="dps">DPS (Dividends Per Share)</option>
                            <option value="wacc">WACC (Weighted Average Cost of Capital)</option>
                            <option value="wmcc">WMCC (Weighted Marginal Cost of Capital)</option>
                            <option value="ytm">YTM (Yield to Maturity)</option>
                            <option value="vat">VAT (Value Added Tax)</option>
                            <option value="pe">P/E (Price/Earnings Ratio)</option>
                            <option value="intrinsic">Intrinsic Value</option>
                            <option value="ke">Ke (Cost of Equity)</option>
                            <option value="kd">Kd (Cost of Debt)</option>
                            <option value="kp">Kp (Cost of Preferred)</option>
                            <option value="npv">NPV (Net Present Value)</option>
                            <option value="irr">IRR (Internal Rate of Return)</option>
                            <option value="pi">PI (Profitability Index)</option>
                            <option value="cashflows">Cashflows (Inflows - Outflows)</option>
                            <option value="correlation">Correlation Coefficient</option>
                            <option value="cumright">Cum Right</option>
                            <option value="exdiv">Ex Dividend</option>
                            <option value="dol">DOL (Degree of Operating Leverage)</option>
                            <option value="dtl">DTL (Degree of Total Leverage)</option>
                            <option value="dfl">DFL (Degree of Financial Leverage)</option>
                            <option value="eva">EVA (Economic Value Added)</option>
                            <option value="portfoliorisk">Portfolio Risk</option>
                        </select>
                    </div>
                    <div id="formula-summary" style="margin-bottom:18px;color:var(--muted);font-size:1.04em;"></div>
                    <div id="formula-inputs" style="display:grid;grid-template-columns:1fr 1fr;gap:18px 32px;margin-bottom:18px;"></div>
                    <button type="submit" style="margin-top:8px;padding:10px 0;font-size:1.08em;font-weight:600;background:var(--accent);color:#fff;border:none;border-radius:6px;cursor:pointer;">Calculate</button>
                </form>
                <div id="finance-results" style="margin-top:22px;font-size:1.13em;min-height:32px;background:var(--bg);border-radius:8px;padding:12px 14px 10px 14px;border:1px solid var(--border);box-shadow:0 1px 4px rgba(10,25,47,0.04);"></div>
            </section>
            <!-- Side Blog Feeds (dynamic, script: updateFeeds) -->
            <section class="card" id="side-feeds" style="display:flex;gap:24px;align-items:flex-start;justify-content:space-between;">
                <div style="flex:1;min-width:180px;">
                    <h3 style="color:var(--accent);font-size:1.1rem;margin-bottom:8px;">Featured Blog</h3>
                    <div id="feed-left" style="font-size:1em;color:var(--muted);"></div>
                </div>
                <div style="flex:1;min-width:180px;">
                    <h3 style="color:var(--accent);font-size:1.1rem;margin-bottom:8px;">AI & Finance Highlight</h3>
                    <div id="feed-right" style="font-size:1em;color:var(--muted);"></div>
                </div>
            </section>
            <!-- BlackRock Story Section -->
            <section class="card" id="blackrock-story">
                <h2 style="margin-bottom:18px;">How BlackRock Became the World’s Largest Asset Manager</h2>
                <p style="font-size:1.08rem;line-height:1.7;">
                    BlackRock was founded in 1988 by Larry Fink and a team of partners with a vision to provide institutional clients with risk management and investment advisory services. Through a relentless focus on technology, transparency, and client trust, BlackRock grew rapidly, acquiring key firms and expanding globally. The launch of iShares ETFs in 2000 revolutionized passive investing, and BlackRock’s commitment to innovation and stewardship has made it the world’s largest asset manager, overseeing trillions in assets and setting industry standards for governance and sustainability.
                </p>
            </section>
            <!-- Team Section -->
            <section class="card" id="team">
                <h2 style="margin-bottom:18px;">Meet the Team</h2>
                <ul style="padding-left:18px;">
                    <li><b>Technical Researcher:</b> Mr. Ngondo Kimemia</li>
                    <li><b>Financial Researcher:</b> Mr. Alfred Nduati</li>
                    <li><b>Financial Researcher:</b> Mr. Mathew Ngoroge</li>
                    <li><b>:</b> [Manager Name]</li>
                    <li><b>Compliance Lead:</b> Mr Alfred Nduati</li>
                    <li><b>Student Contributors:</b> [List of Students]</li>
                </ul>
            </section>
            <!-- Contact Section -->
            <section class="card" id="contact">
                <h2 style="margin-bottom:18px;">Contact & Feedback</h2>
                <p style="font-size:1.08rem;line-height:1.7;">Have questions, suggestions, or want to join the project? <br>Email <a href="mailto:info@strathmore.edu">info@strathmore.edu</a> or use the AI chatbox below. We value your input and collaboration!</p>
            </section>
        </main>
        <aside class="side">
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Live Quotes</h3>
                <div id="live-quotes" style="font-size:0.98em;line-height:1.5;"></div>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Upcoming Events</h3>
                <ul id="upcoming-events" style="list-style:none;padding-left:0;margin:0;font-size:0.98em;line-height:1.5;"></ul>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;margin-bottom:18px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Featured Research</h3>
                <div id="featured-research" style="font-size:0.98em;"></div>
            </div>
            <div class="sidebar-card" style="background:var(--card-bg);border-radius:10px;padding:18px 14px;box-shadow:0 2px 8px rgba(10,25,47,0.10);">
                <h3 style="margin-top:0;margin-bottom:10px;color:var(--accent);font-size:1.1rem;">Community Highlights</h3>
                <div id="community-highlights" style="font-size:0.98em;"></div>
            </div>
        </aside>
    </div>
    <div class="ai-chatbox" id="ai-chatbox">
        <div style="background:var(--primary);color:#fff;padding:6px 10px;border-radius:10px 10px 0 0;font-weight:700;font-size:0.98em;">AI Research Assistant</div>
        <div id="chat-messages" style="flex:1;min-height:40px;max-height:90px;overflow-y:auto;padding:6px 8px;font-size:0.92em;"></div>
        <form id="chat-form" style="display:flex;border-top:1px solid #e0e0e0;">
            <input id="chat-input" type="text" placeholder="Ask about AI, finance, ..." style="flex:1;padding:5px 7px;border:none;font-size:0.97em;outline:none;border-radius:0 0 0 10px;">
            <button type="submit" style="padding:0 10px;font-size:0.97em;">Send</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <script>
    // --- Hero Heading Chameleon Color ---
    window.addEventListener('DOMContentLoaded', function() {
        const heading = document.getElementById('hero-heading');
        if (heading) {
            let hue = 210;
            function animateHeroHeading() {
                hue += 0.7;
                if (hue > 300) hue = 210;
                heading.style.color = `hsl(${hue}, 80%, 60%)`;
                requestAnimationFrame(animateHeroHeading);
            }
            animateHeroHeading();
        }
        // --- Hero Paragraph Slow Reveal, Ocean Blue Wavy Animation, Justified, Readable Font ---
        const desc = document.getElementById('hero-desc');
        if (desc) {
            const text1 = "Karibu! Welcome to the Strathmore Student-Run Fund. Our initiative is dedicated to equipping students with practical investment and financial management skills, grounded in real-world experience and academic research. Whether you are new to finance or seeking to deepen your expertise, our mission is to empower you with the knowledge and confidence to make informed financial decisions.";
            const text2 = "Student-run investment funds have a rich history, originating in the early 20th century as platforms for experiential learning. Today, universities worldwide—including Strathmore—enable students to analyze markets, manage portfolios, and develop leadership in finance. Through teamwork and discipline, we demonstrate that vijana (youth) can drive innovation and integrity in the financial sector.";
            const paragraphs = [text1, text2];
            let pIdx = 0, wIdx = 0;
            // Ocean blue wavy color animation
            function getOceanBlue(t) {
                // Subtle blue wave: narrow the range for both hue and lightness
                // Soft blue: hsl(208, 85%, 62%) to hsl(212, 85%, 54%)
                const minL = 54, maxL = 62;
                const minH = 208, maxH = 212;
                const wave = Math.sin(t * Math.PI * 2);
                const lightness = minL + (maxL - minL) * (wave + 1) / 2;
                const hue = minH + (maxH - minH) * (Math.cos(t * Math.PI * 2) + 1) / 2;
                return `hsl(${hue.toFixed(0)}, 85%, ${lightness.toFixed(1)}%)`;
            }
            let colorStep = 0;
            function revealPara() {
                if (pIdx >= paragraphs.length) return;
                const para = paragraphs[pIdx];
                const words = para.split(' ');
                let idx = 0;
                function revealWord() {
                    // Animate color as a wave along the paragraph
                    let html = '';
                    for (let j = 0; j < pIdx; j++) {
                        html += `<span style='display:block;margin-bottom:12px;text-align:justify;'>${paragraphs[j]}</span>`;
                    }
                    for (let k = 0; k <= idx; k++) {
                        const t = ((wIdx + k + colorStep) % 32) / 32;
                        html += `<span style='color:${getOceanBlue(t)};'>${words[k]}</span>` + (k < idx ? ' ' : '');
                    }
                    if (idx < words.length-1) {
                        html += '|';
                    }
                    desc.innerHTML = html;
                    if (idx < words.length-1) {
                        idx++;
                        setTimeout(revealWord, 65);
                    } else {
                        wIdx += words.length;
                        pIdx++;
                        setTimeout(revealPara, 400);
                    }
                }
                revealWord();
            }
            revealPara();
            // Animate the color wave after reveal
            function animateWave() {
                colorStep++;
                // Only animate after all text is revealed
                if (pIdx >= paragraphs.length) {
                    const allWords = paragraphs.map(p => p.split(' '));
                    let html = '';
                    let wordIdx = 0;
                    for (let i = 0; i < allWords.length; i++) {
                        html += `<span style='display:block;margin-bottom:12px;text-align:justify;'>`;
                        for (let k = 0; k < allWords[i].length; k++) {
                            const t = ((wordIdx + colorStep) % 32) / 32;
                            html += `<span style='color:${getOceanBlue(t)};'>${allWords[i][k]}</span>` + (k < allWords[i].length-1 ? ' ' : '');
                            wordIdx++;
                        }
                        html += `</span>`;
                    }
                    desc.innerHTML = html;
                }
                requestAnimationFrame(animateWave);
            }
            animateWave();
        }
        // --- Keep Reading Link ---
        const keepReading = document.getElementById('keep-reading-link');
        const historyDiv = document.getElementById('student-fund-history');
        if (keepReading && historyDiv) {
            keepReading.addEventListener('click', function(e) {
                e.preventDefault();
                historyDiv.style.display = historyDiv.style.display === 'none' ? 'block' : 'none';
                keepReading.textContent = historyDiv.style.display === 'block' ? 'Hide History' : 'Keep Reading';
            });
        }
    });
    </script>

    <script>
    // --- Hero Heading Chameleon Color ---
    window.addEventListener('DOMContentLoaded', function() {
        const heading = document.getElementById('hero-heading');
        if (heading) {
            let hue = 210;
            function animateHeroHeading() {
                hue += 0.7;
                if (hue > 300) hue = 210;
                heading.style.color = `hsl(${hue}, 80%, 60%)`;
                requestAnimationFrame(animateHeroHeading);
            }
            animateHeroHeading();
        }
        // --- Hero Paragraph Slow Reveal ---
        const desc = document.getElementById('hero-desc');
        if (desc) {
            const text = "Welcome to the Strathmore Student-Run Fund portal. Our mission is to empower students to lead, innovate, and collaborate in the world of finance. We provide hands-on investment experience, foster financial literacy, and set new standards for student-led fund governance and research.";
            const words = text.split(' ');
            let idx = 0;
            function reveal() {
                desc.innerHTML = words.slice(0, idx+1).join(' ') + (idx < words.length-1 ? '|' : '');
                if (idx < words.length-1) {
                    idx++;
                    setTimeout(reveal, 70);
                } else {
                    desc.innerHTML = words.join(' ');
                }
            }
            reveal();
        }
    });
    </script>

        <style>
        /* --- Enhanced Market Snapshot, News, and Finance Facts --- */
        .swipeable-list {
            display: flex;
            overflow-x: auto;
            gap: 18px;
            scroll-snap-type: x mandatory;
            padding-bottom: 4px;
        }
        .swipeable-list::-webkit-scrollbar { height: 6px; background: #e0e0e0; }
        .swipeable-list::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 3px; }
        .swipeable-item {
            min-width: 180px;
            background: var(--bg);
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(10,25,47,0.07);
            padding: 12px 14px;
            scroll-snap-align: start;
            border: 1px solid var(--border);
            transition: box-shadow 0.2s;
        }
        .swipeable-item.active {
            box-shadow: 0 2px 12px rgba(10,25,47,0.13);
            border-color: var(--accent);
        }
        .swipe-nav-btn {
            background: var(--accent);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            font-size: 1.2em;
            cursor: pointer;
            margin: 0 4px;
            box-shadow: 0 1px 4px rgba(10,25,47,0.10);
            transition: background 0.2s;
        }
        .swipe-nav-btn:active { background: var(--accent-dark, #1a237e); }
        .swipeable-list-wrap { display: flex; align-items: center; gap: 6px; }
        .sidebar-card h3 { display: flex; align-items: center; justify-content: space-between; }
        </style>

    <style>
    /* --- Enhanced Market Snapshot, News, and Finance Facts --- */
    .swipeable-list {
      display: flex;
      overflow-x: auto;
      gap: 18px;
      scroll-snap-type: x mandatory;
      padding-bottom: 4px;
    }
    .swipeable-list::-webkit-scrollbar { height: 6px; background: #e0e0e0; }
    .swipeable-list::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 3px; }
    .swipeable-item {
      min-width: 180px;
      background: var(--bg);
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(10,25,47,0.07);
      padding: 12px 14px;
      scroll-snap-align: start;
      border: 1px solid var(--border);
      transition: box-shadow 0.2s;
    }
    .swipeable-item.active {
      box-shadow: 0 2px 12px rgba(10,25,47,0.13);
      border-color: var(--accent);
    }
    .swipe-nav-btn {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      font-size: 1.2em;
      cursor: pointer;
      margin: 0 4px;
      box-shadow: 0 1px 4px rgba(10,25,47,0.10);
      transition: background 0.2s;
    }
    .swipe-nav-btn:active { background: var(--accent-dark, #1a237e); }
    .swipeable-list-wrap { display: flex; align-items: center; gap: 6px; }
    .sidebar-card h3 { display: flex; align-items: center; justify-content: space-between; }
    </style>

    <script>
    // --- Deep Market Snapshot, News, and Finance Facts (Auto, Swipeable) ---
    // 1. Market Snapshot: Major indices, currencies, crypto, commodities
    const marketSnapshotData = [
    {name:'S&P 500', value:'5,432.10', change:'+0.18%', info:'US large-cap stocks, global benchmark.'},
    {name:'Nasdaq', value:'17,890.45', change:'-0.12%', info:'Tech-heavy US index, tracks innovation.'},
    {name:'FTSE 100', value:'7,650.30', change:'+0.09%', info:'UK blue-chip stocks, global exposure.'},
    {name:'Nikkei 225', value:'32,100.50', change:'+0.25%', info:'Japan’s main stock index, export-driven.'},
    {name:'US 10 Yr', value:'4.12%', change:'-0.05%', info:'US Treasury yield, key for rates.'},
    {name:'Crude Oil', value:'$78.20', change:'+0.41%', info:'Global energy price barometer.'},
    {name:'Gold', value:'$2,345.60', change:'-0.11%', info:'Safe-haven asset, inflation hedge.'},
    {name:'BTC/USD', value:'$44,200', change:'+2.3%', info:'Bitcoin, leading cryptocurrency.'},
    {name:'EUR/USD', value:'1.09', change:'-0.08%', info:'Euro vs US Dollar, FX benchmark.'}
    ];
    // 2. Trending Global News (last 24h, finance focus)
    const trendingNewsData = [
    {title:'Global stocks edge higher as inflation fears ease', url:'https://www.ft.com/', summary:'Markets rally on signs of cooling inflation in US and Europe.'},
    {title:'US job growth beats expectations in July', url:'https://www.wsj.com/', summary:'Strong labor market data boosts investor confidence.'},
    {title:'Oil prices rise amid Middle East tensions', url:'https://www.bloomberg.com/', summary:'Crude oil climbs as geopolitical risks increase.'},
    {title:'Bitcoin surges past $44,000 on ETF optimism', url:'https://www.coindesk.com/', summary:'Crypto markets rally as ETF approval looks likely.'},
    {title:'China’s exports rebound, easing slowdown concerns', url:'https://www.reuters.com/', summary:'Chinese trade data surprises to the upside.'},
    {title:'ECB signals end to rate hikes in 2025', url:'https://www.cnbc.com/', summary:'European Central Bank hints at policy pause.'},
    {title:'AI stocks lead tech sector gains', url:'https://www.nasdaq.com/', summary:'Artificial intelligence companies outperform broader market.'},
    {title:'Gold demand rises as investors seek safety', url:'https://www.kitco.com/', summary:'Precious metals attract inflows amid market volatility.'}
    ];
    // 3. Quick Finance Facts (educational, surprising, for students)
    const financeFactsData = [
    'The S&P 500 covers about 80% of the US stock market’s value.',
    'Compound interest can turn $100/month into $20,000+ in 10 years at 8%.',
    'The first ETF launched in 1993; now there are over 8,000 worldwide.',
    'Bitcoin’s supply is capped at 21 million coins.',
    'A diversified portfolio can reduce risk without sacrificing returns.',
    'The “Rule of 72” estimates how long it takes to double your money: 72 ÷ interest rate.',
    'The world’s largest asset manager, BlackRock, oversees over $10 trillion.',
    'The NYSE is the world’s largest stock exchange by market cap.',
    'Mutual funds allow investors to pool money for diversification.',
    'The US dollar is the most traded currency globally.'
    ];
    // --- Swipeable/Auto-Rotating UI Logic ---
    function renderSwipeableList(container, data, renderFn, navIdPrefix) {
        let idx = 0;
        function update(activeIdx) {
            container.innerHTML = '';
            const wrap = document.createElement('div');
            wrap.className = 'swipeable-list';
            data.forEach((item, i) => {
                const div = document.createElement('div');
                div.className = 'swipeable-item' + (i===activeIdx?' active':'');
                div.innerHTML = renderFn(item, i);
                wrap.appendChild(div);
            });
            container.appendChild(wrap);
        }
        function nav(dir) {
            idx = (idx + dir + data.length) % data.length;
            update(idx);
        }
        // Navigation buttons
        const navWrap = document.createElement('div');
        navWrap.className = 'swipeable-list-wrap';
        const leftBtn = document.createElement('button');
        leftBtn.className = 'swipe-nav-btn';
        leftBtn.innerHTML = '&#8592;';
        leftBtn.onclick = () => nav(-1);
        const rightBtn = document.createElement('button');
        rightBtn.className = 'swipe-nav-btn';
        rightBtn.innerHTML = '&#8594;';
        rightBtn.onclick = () => nav(1);
        navWrap.appendChild(leftBtn);
        navWrap.appendChild(container);
        navWrap.appendChild(rightBtn);
        // Insert navWrap before container's parent
        container.parentNode.insertBefore(navWrap, container);
        container.style.display = 'none';
        // Auto-rotate
        setInterval(()=>{ nav(1); }, 4000);
        update(idx);
    }
    // --- Render Market Snapshot, Trending News, and Quick Finance Facts together ---
    document.addEventListener('DOMContentLoaded', function() {
        // Market Snapshot
        const msCont = document.getElementById('market-snapshot');
        if (msCont) {
            renderSwipeableList(msCont, marketSnapshotData, (m) => `
                <b style='font-size:1.08em;color:var(--accent);'>${m.name}</b><br>
                <span style='font-size:1.13em;font-weight:700;'>${m.value}</span>
                <span style='color:${m.change.startsWith('+')?'#4caf50':'#e53935'};font-weight:600;margin-left:8px;'>${m.change}</span>
                <div style='color:var(--muted);font-size:0.97em;margin-top:4px;'>${m.info}</div>
            `, 'ms');
        }
        // Trending News
        const newsCont = document.getElementById('trending-news');
        if (newsCont) {
            renderSwipeableList(newsCont, trendingNewsData, (n) => `
                <a href='${n.url}' target='_blank' style='font-weight:700;color:var(--accent);text-decoration:none;'>${n.title}</a>
                <div style='color:var(--muted);font-size:0.97em;margin-top:3px;'>${n.summary}</div>
            `, 'news');
        }
        // Quick Finance Facts
        const factCont = document.getElementById('finance-fact');
        if (factCont) {
            renderSwipeableList(factCont, financeFactsData, (f) => `
                <span style='font-size:1.08em;'>${f}</span>
            `, 'fact');
        }
    });
    </script>
    <script>
        // --- Logo Animation (sync with nav, always left of nav) ---
        window.addEventListener('DOMContentLoaded', function() {
            const logo = document.querySelector('.logo');
            const nav = document.querySelector('.header-inner nav');
            if (!logo || !nav) return;
            let direction = 1;
            let pos = 0;
            let hue = 210; // Start with a blueish hue
            function animateLogo() {
                // Move logo
                const navRect = nav.getBoundingClientRect();
                const logoRect = logo.getBoundingClientRect();
                const parentRect = logo.parentElement.getBoundingClientRect();
                const max = navRect.left - parentRect.left - logoRect.width - 16;
                pos += direction * 2;
                if (pos >= max) { pos = max; direction = -1; }
                if (pos <= 0) { pos = 0; direction = 1; }
                logo.style.marginLeft = pos + 'px';
                // Chameleon color effect: cycle through blue, teal, green, purple (not weird colors)
                hue += 0.7;
                if (hue > 300) hue = 210; // Stay in blue-green-purple range
                logo.style.color = `hsl(${hue}, 80%, 60%)`;
                requestAnimationFrame(animateLogo);
            }
            animateLogo();
        });
        // --- Ticker: Show current date and classic AI/ML milestones ---
        const tickerData = [
            `Date: ${new Date().toLocaleString()}`,
            '1694: Bank of England founded, pioneering the modern central bank.',
            '1720: South Sea & Mississippi Bubbles burst, first global lessons in speculation.',
            'Late 1700s: Joint-stock companies and Lloyd’s of London enable global trade.',
            '1817: NYSE formally established, rise of organized equity trading.',
            '1855: Limited liability laws in UK fuel industrial growth.',
            '1863-64: US National Banking Acts create a uniform currency.',
            '1873–1879: Long Depression begins with Vienna Stock Exchange collapse.',
            'Late 1800s: London becomes world’s financial capital; telegraph/steamship enable global capital.',
            '1907: Panic leads to creation of US Federal Reserve.',
            '1929: Wall Street Crash triggers Great Depression.',
            '1944: Bretton Woods Conference establishes IMF and World Bank.',
            '1971: End of gold standard; currencies begin to float.',
            '1987: Black Monday, largest single-day stock market drop.',
            '2008: Global Financial Crisis exposes dangers of leverage.',
            '2020s: Digital finance, fintech, and CBDCs reshape money and investing.'
        ];
        let tickerIndex = 0;
        function updateTicker() {
            const ticker = document.getElementById('ticker-content');
            ticker.textContent = tickerData[tickerIndex];
            tickerIndex = (tickerIndex + 1) % tickerData.length;
        }
        setInterval(updateTicker, 2500);
        updateTicker();
        // --- Side Blog Feeds ---
        const leftFeeds = [
            {title:'WSJ: AI in Finance', url:'https://www.wsj.com/', text:'AI is transforming global finance, from trading to compliance.'},
            {title:'Nasdaq: Market Innovation', url:'https://www.nasdaq.com/', text:'Next-gen tech is powering capital markets and liquidity.'},
            {title:'BlackRock: Fund Regulation', url:'https://www.blackrock.com/fund-regulatory', text:'Transparency and compliance are key to modern fund management.'},
            {title:'Strathmore: Student Life', url:'https://strathmore.edu/', text:'Strathmore University fosters innovation and leadership.'}
        ];
        const rightFeeds = [
            {title:'AI Research: Backpropagation', url:'https://en.wikipedia.org/wiki/Backpropagation', text:'Backpropagation revolutionized neural network training.'},
            {title:'Deep Learning Milestones', url:'https://en.wikipedia.org/wiki/Deep_learning', text:'From perceptrons to transformers, deep learning evolves.'},
            {title:'Finance & AI Blogs', url:'https://www.nasdaq.com/articles/looking-all-day-data-24-hour-trading', text:'Data-driven trading and 24-hour markets.'},
            {title:'OpenAI: Modern AI', url:'https://openai.com/blog/', text:'Latest breakthroughs in artificial intelligence.'}
        ];
        let lf = 0, rf = 0;
        function updateFeeds() {
            const l = leftFeeds[lf];
            const r = rightFeeds[rf];
            document.getElementById('feed-left').innerHTML = `<a href='${l.url}' target='_blank' style='font-weight:700;color:var(--accent);text-decoration:none;'>${l.title}</a><br><span style='color:var(--muted);'>${l.text}</span>`;
            document.getElementById('feed-right').innerHTML = `<a href='${r.url}' target='_blank' style='font-weight:700;color:var(--accent);text-decoration:none;'>${r.title}</a><br><span style='color:var(--muted);'>${r.text}</span>`;
            lf = (lf + 1) % leftFeeds.length;
            rf = (rf + 1) % rightFeeds.length;
        }
        setInterval(updateFeeds, 4000);
        updateFeeds();
        // --- Neural Network: Classic Perceptron (Rosenblatt, 1958) ---
        class Perceptron {
            constructor(inputSize, lr = 0.1) {
                this.weights = Array(inputSize).fill(0).map(() => Math.random() * 2 - 1);
                this.bias = Math.random() * 2 - 1;
                this.lr = lr;
            }
            activate(x) { return x >= 0 ? 1 : 0; }
            predict(inputs) {
                let sum = this.bias;
                for (let i = 0; i < this.weights.length; i++) sum += this.weights[i] * inputs[i];
                return this.activate(sum);
            }
            train(inputs, target) {
                const guess = this.predict(inputs);
                const error = target - guess;
                for (let i = 0; i < this.weights.length; i++) {
                    this.weights[i] += error * inputs[i] * this.lr;
                }
                this.bias += error * this.lr;
            }
        }
        // Demo: Train perceptron on AND logic
        const p = new Perceptron(2, 0.2);
        const data = [
            {inputs: [0,0], target: 0},
            {inputs: [0,1], target: 0},
            {inputs: [1,0], target: 0},
            {inputs: [1,1], target: 1}
        ];
        for(let epoch=0; epoch<20; epoch++) {
            for(const d of data) p.train(d.inputs, d.target);
        }
        // --- Perceptron Demo Visualization ---
        function renderPerceptronDemo() {
            const demo = document.getElementById('perceptron-demo');
            let html = '<table><tr><th>Input</th><th>Target</th><th>Prediction</th></tr>';
            for(const d of data) {
                html += `<tr><td>[${d.inputs.join(', ')}]</td><td>${d.target}</td><td>${p.predict(d.inputs)}</td></tr>`;
            }
            html += '</table>';
            demo.innerHTML = html;
        }
        renderPerceptronDemo();
        // --- Random Data Generator ---
        function generateRandomData() {
            let arr = Array.from({length: 8}, () => (Math.random()*100).toFixed(2));
            document.getElementById('random-data').textContent = arr.join(', ');
        }
    // ...existing code...
    // --- Financial Formula Calculator Handler (Dropdown version) ---
    const formulaInputs = {
        eps: [
            {name:'netIncome', label:'Net Income', type:'number', help:'Total net income for the period.'},
            {name:'shares', label:'Shares', type:'number', help:'Number of shares outstanding.'}
        ],
        dps: [
            {name:'dividends', label:'Dividends', type:'number', help:'Total dividends paid.'},
            {name:'shares', label:'Shares', type:'number', help:'Number of shares outstanding.'}
        ],
        wacc: [
            {name:'ke', label:'Ke (Cost of Equity)', type:'number', help:'Cost of equity.'},
            {name:'we', label:'We (Equity Weight)', type:'number', help:'Proportion of equity.'},
            {name:'kd', label:'Kd (Cost of Debt)', type:'number', help:'Cost of debt.'},
            {name:'wd', label:'Wd (Debt Weight)', type:'number', help:'Proportion of debt.'},
            {name:'kp', label:'Kp (Cost of Preferred)', type:'number', help:'Cost of preferred shares.'},
            {name:'wp', label:'Wp (Preferred Weight)', type:'number', help:'Proportion of preferred shares.'},
            {name:'t', label:'T (Tax Rate)', type:'number', help:'Tax rate (as decimal, e.g. 0.3 for 30%).'}
        ],
        wmcc: [
            {name:'ke', label:'Ke (Cost of Equity)', type:'number'},
            {name:'kd', label:'Kd (Cost of Debt)', type:'number'},
            {name:'kp', label:'Kp (Cost of Preferred)', type:'number'},
            {name:'weights', label:'Weights (comma, e.g. 0.5,0.3,0.2)', type:'text', help:'Weights for each cost, must sum to 1.'}
        ],
        ytm: [
            {name:'face', label:'Face Value', type:'number'},
            {name:'price', label:'Price', type:'number'},
            {name:'coupon', label:'Coupon', type:'number'},
            {name:'n', label:'n (years)', type:'number'}
        ],
        vat: [
            {name:'amount', label:'Amount', type:'number'},
            {name:'rate', label:'Rate (%)', type:'number'}
        ],
        pe: [
            {name:'price', label:'Price', type:'number'},
            {name:'eps', label:'EPS', type:'number'}
        ],
        intrinsic: [
            {name:'dividend', label:'Dividend', type:'number'},
            {name:'rate', label:'Rate', type:'number'},
            {name:'growth', label:'Growth', type:'number'}
        ],
        ke: [
            {name:'dividend', label:'Dividend', type:'number'},
            {name:'price', label:'Price', type:'number'},
            {name:'growth', label:'Growth', type:'number'}
        ],
        kd: [
            {name:'interest', label:'Interest', type:'number'},
            {name:'price', label:'Price', type:'number'}
        ],
        kp: [
            {name:'dividend', label:'Dividend', type:'number'},
            {name:'price', label:'Price', type:'number'}
        ],
        npv: [
            {name:'cashflows', label:'Cashflows (comma, e.g. 1000,900,800)', type:'text'},
            {name:'rate', label:'Rate (%)', type:'number'}
        ],
        irr: [
            {name:'cashflows', label:'Cashflows (comma, e.g. 1000,900,800)', type:'text'}
        ],
        pi: [
            {name:'npv', label:'NPV', type:'number'},
            {name:'investment', label:'Investment', type:'number'}
        ],
        cashflows: [
            {name:'inflows', label:'Inflows (comma, e.g. 300,400)', type:'text'},
            {name:'outflows', label:'Outflows (comma, e.g. 100,200)', type:'text'}
        ],
        correlation: [
            {name:'x', label:'X (comma, e.g. 1,2,3)', type:'text'},
            {name:'y', label:'Y (comma, e.g. 4,5,6)', type:'text'}
        ],
        cumright: [
            {name:'shares', label:'Shares', type:'number'},
            {name:'rights', label:'Rights', type:'number'}
        ],
        exdiv: [
            {name:'price', label:'Price', type:'number'},
            {name:'dividend', label:'Dividend', type:'number'}
        ],
        dol: [
            {name:'q', label:'Q (quantity)', type:'number'},
            {name:'p', label:'P (price per unit)', type:'number'},
            {name:'f', label:'F (fixed cost)', type:'number'},
            {name:'v', label:'V (variable cost)', type:'number'}
        ],
        dtl: [
            {name:'ebit', label:'EBIT', type:'number'},
            {name:'ebt', label:'EBT', type:'number'}
        ],
        dfl: [
            {name:'ebt', label:'EBT', type:'number'},
            {name:'ebtMinusInterest', label:'EBT - Interest', type:'number'}
        ],
        eva: [
            {name:'nopat', label:'NOPAT', type:'number'},
            {name:'capital', label:'Capital', type:'number'},
            {name:'wacc', label:'WACC', type:'number'}
        ],
        portfoliorisk: [
            {name:'weights', label:'Weights (comma, e.g. 0.5,0.5)', type:'text'},
            {name:'covariances', label:'Covariances (semicolon rows, comma cols, e.g. 0.04,0.01;0.01,0.09)', type:'text'}
        ]
    };
    const formulaHelp = {
        eps: 'EPS = Net Income / Shares',
        dps: 'DPS = Dividends / Shares',
        wacc: 'WACC = Ke*We + Kd*Wd*(1-T) + Kp*Wp',
        wmcc: 'WMCC = Σ(Cost × Weight)',
        ytm: 'YTM = (Coupon + (Face-Price)/n) / ((Face+Price)/2)',
        vat: 'VAT = Amount × Rate (%)',
        pe: 'P/E = Price / EPS',
        intrinsic: 'Intrinsic Value = Dividend / (Rate - Growth)',
        ke: 'Ke = (Dividend/Price) + Growth',
        kd: 'Kd = Interest / Price',
        kp: 'Kp = Dividend / Price',
        npv: 'NPV = Σ(Cashflow / (1+Rate)^t)',
        irr: 'IRR = Internal Rate of Return (solves NPV=0)',
        pi: 'PI = (NPV + Investment) / Investment',
        cashflows: 'Cashflows = Inflows - Outflows',
        correlation: 'Correlation Coefficient = relationship between two datasets',
        cumright: 'Cum Right = Shares + Rights',
        exdiv: 'Ex Dividend = Price - Dividend',
        dol: 'DOL = Q(P-F) / [Q(P-F)-V]',
        dtl: 'DTL = EBIT / EBT',
        dfl: 'DFL = EBT / (EBT - Interest)',
        eva: 'EVA = NOPAT - Capital × WACC',
        portfoliorisk: 'Portfolio Risk = sqrt(ΣΣ(Weight_i × Weight_j × Cov_ij))'
    };
    function renderFormulaInputs(formula) {
        const inputs = formulaInputs[formula] || [];
        if (!inputs.length) return `<div style='color:#e53935;font-weight:600;'>No input fields found for this formula.</div>`;
        // Use grid for 3+ fields, vertical stack for 1-2
        let html = '';
        if (inputs.length <= 2) {
            for(const inp of inputs) {
                html += `<div style='display:flex;flex-direction:column;gap:2px;margin-bottom:12px;'>
                    <label for='${inp.name}' style='font-weight:600;margin-bottom:2px;'>${inp.label}</label>
                    <input type='${inp.type}' name='${inp.name}' id='${inp.name}' style='width:100%;padding:7px 8px;border-radius:5px;border:1px solid var(--border);background:var(--bg);font-size:1.05em;' required autocomplete='off' ${inp.type==='number'?'step="any"':''}>
                    ${inp.help?`<span style='color:var(--muted);font-size:0.97em;margin-top:1px;'>${inp.help}</span>`:''}
                </div>`;
            }
        } else {
            html += `<div style='display:grid;grid-template-columns:1fr 1fr;gap:18px 32px;'>`;
            for(const inp of inputs) {
                html += `<div style='display:flex;flex-direction:column;gap:2px;'>
                    <label for='${inp.name}' style='font-weight:600;margin-bottom:2px;'>${inp.label}</label>
                    <input type='${inp.type}' name='${inp.name}' id='${inp.name}' style='width:100%;padding:7px 8px;border-radius:5px;border:1px solid var(--border);background:var(--bg);font-size:1.05em;' required autocomplete='off' ${inp.type==='number'?'step="any"':''}>
                    ${inp.help?`<span style='color:var(--muted);font-size:0.97em;margin-top:1px;'>${inp.help}</span>`:''}
                </div>`;
            }
            html += `</div>`;
        }
        return html;
    }
    (function() {
        function ready(fn) {
            if (document.readyState !== 'loading') fn();
            else document.addEventListener('DOMContentLoaded', fn);
        }
        ready(function() {
            const formulaSelect = document.getElementById('formula-select');
            const formulaInputsDiv = document.getElementById('formula-inputs');
            const formulaSummaryDiv = document.getElementById('formula-summary');
            const financeForm = document.getElementById('finance-form');
            // Show relevant input fields and summary as soon as a formula is selected
            function updateFormulaInputs() {
                formulaInputsDiv.innerHTML = renderFormulaInputs(formulaSelect.value);
                formulaSummaryDiv.innerHTML = formulaHelp[formulaSelect.value] ? `<b>Formula:</b> ${formulaHelp[formulaSelect.value]}` : '';
                document.getElementById('finance-results').innerHTML = '<span style="color:var(--muted);">Enter values and click Calculate.</span>';
            }
            formulaSelect.addEventListener('change', updateFormulaInputs);
            updateFormulaInputs();
            financeForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formula = formulaSelect.value;
                const data = Object.fromEntries(new FormData(this).entries());
                function num(x) { return Number(x) || 0; }
                function arr(x) { return (x||'').split(',').map(Number).filter(v=>!isNaN(v)); }
                function arr2(x) { return (x||'').split(';').map(row=>row.split(',').map(Number)); }
                let result = '';
                try {
                    if(formula==='eps') result = `<b>EPS</b>: ${num(data.netIncome)} / ${num(data.shares)} = <b>${(num(data.netIncome)/num(data.shares)).toFixed(4)}</b>`;
                    else if(formula==='dps') result = `<b>DPS</b>: ${num(data.dividends)} / ${num(data.shares)} = <b>${(num(data.dividends)/num(data.shares)).toFixed(4)}</b>`;
                    else if(formula==='wacc') result = `<b>WACC</b>: ${num(data.ke)}*${num(data.we)} + ${num(data.kd)}*${num(data.wd)}*(1-${num(data.t)}) + ${num(data.kp)}*${num(data.wp)} = <b>${(num(data.ke)*num(data.we) + num(data.kd)*num(data.wd)*(1-num(data.t)) + num(data.kp)*num(data.wp)).toFixed(4)}</b>`;
                    else if(formula==='wmcc') {
                        let costs = [num(data.ke), num(data.kd), num(data.kp)];
                        let weights = arr(data.weights);
                        if(weights.length===costs.length)
                            result = `<b>WMCC</b>: Σ(Cost × Weight) = <b>${costs.map((c,i)=>`${c}×${weights[i]}`).join(' + ')} = ${(costs.reduce((s,c,i)=>s+c*weights[i],0)).toFixed(4)}</b>`;
                        else result = 'Please provide weights for each cost.';
                    }
                    else if(formula==='ytm') result = `<b>YTM</b>: (${num(data.coupon)} + (${num(data.face)}-${num(data.price)})/${num(data.n)}) / ((${num(data.face)}+${num(data.price)})/2) = <b>${((num(data.coupon)+(num(data.face)-num(data.price))/num(data.n))/((num(data.face)+num(data.price))/2)).toFixed(4)}</b>`;
                    else if(formula==='vat') result = `<b>VAT</b>: ${num(data.amount)} × ${num(data.rate)}% = <b>${(num(data.amount)*num(data.rate)/100).toFixed(4)}</b>`;
                    else if(formula==='pe') result = `<b>P/E</b>: ${num(data.price)} / ${num(data.eps)} = <b>${(num(data.price)/num(data.eps)).toFixed(4)}</b>`;
                    else if(formula==='intrinsic') result = `<b>Intrinsic Value</b>: ${num(data.dividend)} / (${num(data.rate)} - ${num(data.growth)}) = <b>${(num(data.dividend)/(num(data.rate)-num(data.growth))).toFixed(4)}</b>`;
                    else if(formula==='ke') result = `<b>Ke</b>: (${num(data.dividend)}/${num(data.price)}) + ${num(data.growth)} = <b>${((num(data.dividend)/num(data.price))+num(data.growth)).toFixed(4)}</b>`;
                    else if(formula==='kd') result = `<b>Kd</b>: ${num(data.interest)} / ${num(data.price)} = <b>${(num(data.interest)/num(data.price)).toFixed(4)}</b>`;
                    else if(formula==='kp') result = `<b>Kp</b>: ${num(data.dividend)} / ${num(data.price)} = <b>${(num(data.dividend)/num(data.price)).toFixed(4)}</b>`;
                    else if(formula==='npv') {
                        let cfs = arr(data.cashflows);
                        let r = num(data.rate)/100;
                        let npv = cfs.reduce((sum, cf, i) => sum + cf/Math.pow(1+r, i+1), 0);
                        result = `<b>NPV</b>: Σ(Cashflow/(1+${r})^t) = <b>${npv.toFixed(4)}</b>`;
                    }
                    else if(formula==='irr') {
                        let cfs = arr(data.cashflows);
                        let irr = (function irr(cashflows, guess=0.1) {
                            let rate = guess;
                            for(let iter=0; iter<100; iter++) {
                                let npv = 0, dnpv = 0;
                                for(let t=0; t<cashflows.length; t++) {
                                    npv += cashflows[t]/Math.pow(1+rate, t+1);
                                    dnpv -= (t+1)*cashflows[t]/Math.pow(1+rate, t+2);
                                }
                                let newRate = rate - npv/dnpv;
                                if(Math.abs(newRate-rate)<1e-6) return newRate;
                                rate = newRate;
                            }
                            return rate;
                        })(cfs);
                        result = `<b>IRR</b>: <b>${(irr*100).toFixed(2)}%</b>`;
                    }
                    else if(formula==='pi') result = `<b>PI</b>: (${num(data.npv)} + ${num(data.investment)}) / ${num(data.investment)} = <b>${((num(data.npv)+num(data.investment))/num(data.investment)).toFixed(4)}</b>`;
                    else if(formula==='cashflows') {
                        let inflows = arr(data.inflows), outflows = arr(data.outflows);
                        let cashflows = inflows.map((v,i)=>v-(outflows[i]||0));
                        result = `<b>Cashflows</b>: Inflows - Outflows = [${cashflows.join(', ')}]`;
                    }
                    else if(formula==='correlation') {
                        let x = arr(data.x), y = arr(data.y);
                        if(x.length===y.length && x.length>1) {
                            const n = x.length;
                            const avgX = x.reduce((a,b)=>a+b,0)/n;
                            const avgY = y.reduce((a,b)=>a+b,0)/n;
                            let nume=0, denX=0, denY=0;
                            for(let i=0;i<n;i++){
                                nume+=(x[i]-avgX)*(y[i]-avgY);
                                denX+=(x[i]-avgX)**2; denY+=(y[i]-avgY)**2;
                            }
                            let corr = nume/Math.sqrt(denX*denY);
                            result = `<b>Correlation Coefficient</b>: <b>${corr.toFixed(4)}</b>`;
                        } else result = 'Please provide equal-length X and Y arrays.';
                    }
                    else if(formula==='cumright') result = `<b>Cum Right</b>: ${num(data.shares)} + ${num(data.rights)} = <b>${(num(data.shares)+num(data.rights)).toFixed(4)}</b>`;
                    else if(formula==='exdiv') result = `<b>Ex Dividend</b>: ${num(data.price)} - ${num(data.dividend)} = <b>${(num(data.price)-num(data.dividend)).toFixed(4)}</b>`;
                    else if(formula==='dol') result = `<b>DOL</b>: ${num(data.q)}*(${num(data.p)}-${num(data.f)}) / [${num(data.q)}*(${num(data.p)}-${num(data.f)})-${num(data.v)}] = <b>${((num(data.q)*(num(data.p)-num(data.f)))/(num(data.q)*(num(data.p)-num(data.f))-num(data.v))).toFixed(4)}</b>`;
                    else if(formula==='dtl') result = `<b>DTL</b>: ${num(data.ebit)} / ${num(data.ebt)} = <b>${(num(data.ebit)/num(data.ebt)).toFixed(4)}</b>`;
                    else if(formula==='dfl') result = `<b>DFL</b>: ${num(data.ebt)} / ${num(data.ebtMinusInterest)} = <b>${(num(data.ebt)/num(data.ebtMinusInterest)).toFixed(4)}</b>`;
                    else if(formula==='eva') result = `<b>EVA</b>: ${num(data.nopat)} - ${num(data.capital)}×${num(data.wacc)} = <b>${(num(data.nopat)-num(data.capital)*num(data.wacc)).toFixed(4)}</b>`;
                    else if(formula==='portfoliorisk') {
                        let weights = arr(data.weights);
                        let covs = arr2(data.covariances);
                        let risk = 0;
                        for(let i=0;i<weights.length;i++){
                            for(let j=0;j<weights.length;j++){
                                risk += weights[i]*weights[j]*(covs[i]&&covs[i][j]?covs[i][j]:0);
                            }
                        }
                        result = `<b>Portfolio Risk</b>: sqrt(${risk.toFixed(4)}) = <b>${Math.sqrt(risk).toFixed(4)}</b>`;
                    }
                } catch(err) {
                    result = 'Error in calculation: '+err.message;
                }
                document.getElementById('finance-results').innerHTML = result || '<span style="color:var(--muted);">Please fill in values and submit to see result.</span>';
            });
        });
    })();
        // --- Infinite Background Color Animation ---
        let hue = 200;
        function animateBg() {
            hue = (hue + 0.2) % 360;
            document.body.style.background = `linear-gradient(120deg, hsl(${hue},80%,16%) 0%, hsl(${(hue+60)%360},100%,22%) 100%)`;
            requestAnimationFrame(animateBg);
        }
        animateBg();
        // --- Sidebar Dynamic Content ---
    // (Removed old/duplicate sidebar data arrays and functions to avoid conflicts)
        // Right Sidebar
        const liveQuotes = [
            {name:'USD/KES', value:'146.20'},
            {name:'EUR/USD', value:'1.11'},
            {name:'AAPL', value:'$195.30'},
            {name:'TSLA', value:'$720.10'},
            {name:'BTC/USD', value:'$67,200'}
        ];
        function renderLiveQuotes() {
            let html = '<ul style="list-style:none;padding:0;margin:0;">';
            for(const q of liveQuotes) html += `<li><b>${q.name}:</b> ${q.value}</li>`;
            html += '</ul>';
            document.getElementById('live-quotes').innerHTML = html;
        }
        renderLiveQuotes();
        const events = [
            {date:'Aug 20', event:'AI in Finance Webinar'},
            {date:'Aug 25', event:'Student Fund Pitch Day'},
            {date:'Sep 2', event:'Global Markets Conference'},
            {date:'Sep 10', event:'Research Paper Submission Deadline'}
        ];
        let eventIdx = 0;
        function updateEvents() {
            let html = '';
            for(let i=0;i<2;i++) {
                const e = events[(eventIdx+i)%events.length];
                html += `<li><b>${e.date}:</b> ${e.event}</li>`;
            }
            eventIdx = (eventIdx+1)%events.length;
            document.getElementById('upcoming-events').innerHTML = html;
        }
        setInterval(updateEvents, 5000); updateEvents();
        const research = [
            'Whitepaper: Neural Networks in Portfolio Management',
            'Case Study: Student Funds Driving Innovation',
            'Report: AI Regulation in Global Markets',
            'Insight: The Future of Decentralized Finance'
        ];
        let researchIdx = 0;
        function updateResearch() {
            document.getElementById('featured-research').textContent = research[researchIdx];
            researchIdx = (researchIdx+1)%research.length;
        }
        setInterval(updateResearch, 7000); updateResearch();
        const highlights = [
            '“Strathmore students win global AI challenge.”',
            '“Our fund featured in Financial Times.”',
            '“New partnership with Nasdaq announced.”',
            '“Faculty publishes in top AI journal.”'
        ];
        let hlIdx = 0;
        function updateHighlights() {
            document.getElementById('community-highlights').textContent = highlights[hlIdx];
            hlIdx = (hlIdx+1)%highlights.length;
        }
        setInterval(updateHighlights, 6000); updateHighlights();
        // --- Resource Rotator (auto only, every 3 seconds) ---
        const resources = [
            {
                url: "https://www.wsj.com/",
                title: "Wall Street Journal: Markets",
                quote: "Stay updated with the latest global finance news, market trends, and analysis from the WSJ."
            },
            {
                url: "https://www.nasdaq.com/market-activity",
                title: "Nasdaq: Market Activity",
                quote: "Track real-time market activity, indices, and trading data from Nasdaq."
            },
            {
                url: "https://www.nasdaq.com/solutions",
                title: "Nasdaq: Solutions",
                quote: "Discover modern market solutions and technology for global capital markets."
            },
            {
                url: "https://www.blackrock.com/fund-regulatory",
                title: "BlackRock: Fund Regulation",
                quote: "Transparency and compliance are key to modern fund management. BlackRock provides regulatory resources and updates."
            },
            {
                url: "https://www.ft.com/markets",
                title: "Financial Times: Markets",
                quote: "Global market news, analysis, and data from the Financial Times."
            },
            {
                url: "https://www.investopedia.com/",
                title: "Investopedia: Financial Education",
                quote: "Comprehensive financial education, investing guides, and market analysis."
            },
            {
                url: "https://www.bloomberg.com/markets",
                title: "Bloomberg Markets",
                quote: "Business, markets, and data news from Bloomberg."
            }
        ];
        let resourceIdx = 0;
        function renderResource() {
            const r = resources[resourceIdx];
            document.getElementById('resource-content').innerHTML = `
                <a href='${r.url}' target='_blank' style='display:inline-block;padding:16px 18px;background:rgba(88,166,255,0.12);border-radius:8px;font-weight:700;color:var(--accent);text-decoration:none;font-size:1.08em;margin-bottom:8px;'>${r.title}</a>
                <div style='margin-top:10px;font-size:1.02em;color:var(--muted);font-style:italic;'>${r.quote}</div>
            `;
        }
        setInterval(() => {
            resourceIdx = (resourceIdx + 1) % resources.length;
            renderResource();
        }, 3000);
        renderResource();
        // --- Financial History Timeline ---
        const financeHistory = [
            {date:'1694', event:'Bank of England founded, pioneering the modern central bank and stabilizing government debt and currency.'},
            {date:'1720', event:'South Sea Bubble and Mississippi Bubble burst, teaching the first global lessons about financial speculation and regulation.'},
            {date:'Late 1700s', event:'Joint-stock companies and insurance markets like Lloyd’s of London enable global trade and risk management.'},
            {date:'1817', event:'New York Stock Exchange is formally established, marking the rise of organized equity trading.'},
            {date:'1855', event:'Limited liability laws in the UK encourage entrepreneurship and risk-taking, fueling industrial growth.'},
            {date:'1863-64', event:'U.S. National Banking Acts create a uniform currency and national banking system, but also instability.'},
            {date:'1873–1879', event:'The Long Depression begins with the Vienna Stock Exchange collapse, spreading global financial turmoil.'},
            {date:'Late 1800s', event:'London becomes the world’s financial capital; telegraph and steamship technology enable rapid global capital movement.'},
            {date:'1907', event:'Panic of 1907 leads to the creation of the U.S. Federal Reserve in 1913.'},
            {date:'1929', event:'Wall Street Crash triggers the Great Depression, prompting sweeping global financial reforms.'},
            {date:'1944', event:'Bretton Woods Conference establishes the IMF and World Bank, anchoring the postwar financial system.'},
            {date:'1971', event:'End of the gold standard; currencies begin to float, ushering in a new era of global finance.'},
            {date:'1987', event:'Black Monday: Largest single-day stock market drop in history highlights risks of globalized markets.'},
            {date:'2008', event:'Global Financial Crisis exposes the dangers of leverage and interconnected markets, leading to new regulation.'},
            {date:'2020s', event:'Digital finance, fintech, and central bank digital currencies (CBDCs) reshape how money moves and how people invest.'}
        ];
        function renderFinanceHistory() {
            let html = '';
            for(const h of financeHistory) {
                html += `<li><b>${h.date}:</b> ${h.event}</li>`;
            }
            document.getElementById('finance-history').innerHTML = html;
        }
        renderFinanceHistory();
        // --- Financial Calculator AI Chatbox (Refined) ---
        const financialFormulas = {
            eps: (netIncome, shares) => netIncome / shares,
            dps: (dividends, shares) => dividends / shares,
            wacc: (ke, we, kd, wd, kp, wp, t) => (ke*we + kd*wd*(1-t) + kp*wp),
            wmcc: (costs, weights) => costs.reduce((sum, c, i) => sum + c*weights[i], 0),
            ytm: (face, price, coupon, n) => ((coupon + (face-price)/n) / ((face+price)/2)),
            vat: (amount, rate) => amount * rate / 100,
            pe: (price, eps) => price / eps,
            intrinsic: (dividend, growth, rate) => dividend / (rate - growth),
            ke: (dividend, price, growth) => (dividend/price) + growth,
            kd: (interest, price) => interest / price,
            kp: (dividend, price) => dividend / price,
            npv: (cashflows, rate) => cashflows.reduce((sum, cf, i) => sum + cf/Math.pow(1+rate, i+1), 0),
            irr: (cashflows, guess=0.1) => { // Newton-Raphson
                let rate = guess;
                for(let iter=0; iter<100; iter++) {
                    let npv = 0, dnpv = 0;
                    for(let t=0; t<cashflows.length; t++) {
                        npv += cashflows[t]/Math.pow(1+rate, t+1);
                        dnpv -= (t+1)*cashflows[t]/Math.pow(1+rate, t+2);
                    }
                    let newRate = rate - npv/dnpv;
                    if(Math.abs(newRate-rate)<1e-6) return newRate;
                    rate = newRate;
                }
                return rate;
            },
            pi: (npv, investment) => (npv + investment) / investment,
            cashflows: (inflows, outflows) => inflows.map((v,i)=>v-(outflows[i]||0)),
            correlation: (x, y) => {
                const n = x.length;
                const avgX = x.reduce((a,b)=>a+b,0)/n;
                const avgY = y.reduce((a,b)=>a+b,0)/n;
                let num=0, denX=0, denY=0;
                for(let i=0;i<n;i++){
                    num+=(x[i]-avgX)*(y[i]-avgY);
                    denX+=(x[i]-avgX)**2; denY+=(y[i]-avgY)**2;
                }
                return num/Math.sqrt(denX*denY);
            },
            cumright: (shares, rights) => shares + rights,
            exdiv: (price, dividend) => price - dividend,
            dol: (q, p, f, v) => (q*(p-f))/(q*(p-f)-v),
            dtl: (ebit, ebt) => ebit/ebt,
            dfl: (ebt, ebtMinusInterest) => ebt/ebtMinusInterest,
            eva: (nopat, capital, wacc) => nopat - capital*wacc,
            portfolioRisk: (weights, variances, covariances) => {
                let risk = 0;
                for(let i=0;i<weights.length;i++){
                    for(let j=0;j<weights.length;j++){
                        risk += weights[i]*weights[j]*covariances[i][j];
                    }
                }
                return Math.sqrt(risk);
            }
        };
        const nseData = {
            'EABL': { price: 180, eps: 12.5, dps: 7.5, shares: 800000000 },
            'KCB': { price: 45, eps: 6.2, dps: 3.0, shares: 3000000000 },
            'SAFARICOM': { price: 22, eps: 1.8, dps: 1.2, shares: 40000000000 }
        };
        // --- Enhanced AI Chatbox Handler (Refined) ---
        chatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const userMsg = chatInput.value.trim();
            if (!userMsg) return;
            chatMessages.innerHTML += `<div style='margin-bottom:6px;'><b>You:</b> ${userMsg}</div>`;
            chatInput.value = '';
            // Parse for formula keywords
            let response = '';
            try {
                const msg = userMsg.toLowerCase();
                // Financial calculations
                if(msg.includes('eps')) {
                    const match = /eps.*(\d+\.?\d*).*(\d+\.?\d*)/.exec(msg);
                    if(match) response = `EPS = Net Income / Shares = ${match[1]} / ${match[2]} = <b>${financialFormulas.eps(Number(match[1]), Number(match[2])).toFixed(2)}</b>`;
                    else response = 'Please provide net income and number of shares.';
                } else if(msg.includes('dps')) {
                    const match = /dps.*(\d+\.?\d*).*(\d+\.?\d*)/.exec(msg);
                    if(match) response = `DPS = Dividends / Shares = ${match[1]} / ${match[2]} = <b>${financialFormulas.dps(Number(match[1]), Number(match[2])).toFixed(2)}</b>`;
                    else response = 'Please provide total dividends and number of shares.';
                } else if(msg.includes('pe') || msg.includes('p/e')) {
                    const match = /pe.*(\d+\.?\d*).*(\d+\.?\d*)/.exec(msg);
                    if(match) response = `P/E = Price / EPS = ${match[1]} / ${match[2]} = <b>${financialFormulas.pe(Number(match[1]), Number(match[2])).toFixed(2)}</b>`;
                    else response = 'Please provide price and EPS.';
                } else if(msg.includes('npv')) {
                    const match = /npv.*\[(.*?)\].*rate.*(\d+\.?\d*)/i.exec(msg);
                    if(match) {
                        const cashflows = match[1].split(',').map(Number);
                        const rate = Number(match[2])/100;
                        response = `NPV = <b>${financialFormulas.npv(cashflows, rate).toFixed(2)}</b>`;
                    } else response = 'Please provide cashflows as [1000,900,800] and rate as a percent.';
                } else if(msg.includes('irr')) {
                    const match = /irr.*\[(.*?)\]/i.exec(msg);
                    if(match) {
                        const cashflows = match[1].split(',').map(Number);
                        response = `IRR = <b>${(financialFormulas.irr(cashflows)*100).toFixed(2)}%</b>`;
                    } else response = 'Please provide cashflows as [1000,900,800].';
                } else if(msg.includes('wacc')) {
                    response = 'WACC = Ke*We + Kd*Wd*(1-T) + Kp*Wp. Please provide values for Ke, We, Kd, Wd, Kp, Wp, and T.';
                } else if(msg.includes('nse')) {
                    const match = /nse.*(eabl|kcb|safaricom)/i.exec(msg);
                    if(match) {
                        const d = nseData[match[1].toUpperCase()];
                        response = `${match[1].toUpperCase()} - Price: ${d.price}, EPS: ${d.eps}, DPS: ${d.dps}, Shares: ${d.shares}`;
                    } else response = 'Please specify a valid NSE ticker (EABL, KCB, SAFARICOM).';
                } else if(msg.includes('hello') || msg.includes('hi')) {
                    response = 'Hello! I can help you with financial calculations, NSE data, or general finance questions.';
                } else if(msg.includes('thank')) {
                    response = 'You’re welcome! Let me know if you need more calculations or info.';
                } else if(msg.includes('who are you')) {
                    response = 'I am your financial assistant. I can compute finance formulas, explain concepts, and fetch NSE data.';
                } else {
                    response = 'I can help with financial calculations (EPS, DPS, P/E, NPV, IRR, WACC, etc.), NSE data, and general finance questions. Try: "Calculate EPS with net income 100000 and shares 5000" or "Show NSE SAFARICOM".';
                }
            } catch(err) {
                response = 'Sorry, I could not process your request.';
            }
            chatMessages.innerHTML += `<div style='margin-bottom:8px;'><b>AI:</b> ${response}</div>`;
            chatMessages.scrollTop = chatMessages.scrollHeight;
        });
    </script>
</body>
</html>
